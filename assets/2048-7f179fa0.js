import{d as U,o as A,c as S,i as B,F as D,p as te,j as ne,a as j,b as E,f as re,r as se,n as Y,k as oe,l as K,m as le,h as ae,g as ue,q as ce,t as ie,u as fe,s as de,v as ve,x as F,e as I,w as z}from"./index-baf41808.js";const _e=""+new URL("bomb-white-2ce930b9.svg",import.meta.url).href,pe=""+new URL("ice-cube-white-1df9e990.svg",import.meta.url).href,me=""+new URL("health-white-364c128f.svg",import.meta.url).href,W=e=>(te("data-v-75fe4e85"),e=e(),ne(),e),he={key:0,class:"arrow-left",style:{top:"3.375rem",left:"0.5rem"}},ye={key:1,class:"arrow-right",style:{top:"3.375rem",right:"0.5rem"}},we={key:2,class:"arrow-up",style:{top:"0.5rem",left:"3.375rem"}},ge={key:3,class:"arrow-down",style:{bottom:"0.5rem",left:"3.375rem"}},be={key:4,class:"container-prop"},Ae=W(()=>j("img",{src:_e,class:"bomb",style:{top:"0rem",left:"1rem"}},null,-1)),Se=[Ae],Ee={key:5,class:"container-prop"},ke=W(()=>j("img",{src:pe,class:"ice-cube",style:{top:"0.5rem",left:"0.5rem",transform:"rotate(-2deg)"}},null,-1)),xe=[ke],Te={key:6,class:"container-prop"},Ie=W(()=>j("img",{src:me,class:"health",style:{top:"2px",left:"-1px"}},null,-1)),$e=[Ie],Be=U({__name:"PropOnTile",props:{status:{}},setup(e){const t=e;return(n,r)=>(A(),S(D,null,[t.status==="row"?(A(),S("div",he)):B("",!0),t.status==="row"?(A(),S("div",ye)):B("",!0),t.status==="column"?(A(),S("div",we)):B("",!0),t.status==="column"?(A(),S("div",ge)):B("",!0),t.status==="bomb"?(A(),S("div",be,Se)):B("",!0),t.status==="frozen"?(A(),S("div",Ee,xe)):B("",!0),t.status==="heal"?(A(),S("div",Te,$e)):B("",!0)],64))}});const X=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},Le=X(Be,[["__scopeId","data-v-75fe4e85"]]),Oe=U({__name:"Tile",props:{value:{},status:{},row:{},col:{}},setup(e){const t=e,n=E(()=>`${1+9*t.row}rem`),r=E(()=>`${1+9*t.col}rem`),s=E(()=>t.value?Math.log2(t.value):0),l=E(()=>{if(t.status==="frozen")return"#70f3ff";if(!t.value)return"transparent";const _={2:"#ffb035",4:"#ff8936",8:"#ff7000",16:"#ff4e20",32:"#db5a6b",64:"#cb3a56",128:"#dc3023",256:"#ba0400",512:"#b65f47",1024:"#a24d15",2048:"#8b3400",4096:"#6b1400",8192:"#677e44",16384:"#575e33",32768:"#473e22",65536:"#371e11"};return t.value in _?_[t.value]:"transparent"}),a=E(()=>t.status==="frozen"||t.status==="bomb"||t.status==="heal"?"black":"white"),c=E(()=>t.status==="bomb"||t.status==="heal"?"white":"transparent");return(_,h)=>t.value?(A(),S("div",{key:0,style:Y({"background-color":l.value,color:a.value,"box-shadow":`0 0 0.625rem 0rem ${l.value}`,top:n.value,left:r.value,"z-index":s.value}),class:"tile"},[re(Le,{status:t.status},null,8,["status"]),j("p",{class:"tile-number",style:Y({"text-shadow":`
                    0.0625rem 0.0625rem 0.25rem ${c.value},
                    -0.0625rem 0.0625rem 0.25rem ${c.value},
                    -0.0625rem -0.0625rem 0.25rem ${c.value},
                    0.0625rem -0.0625rem 0.25rem ${c.value}
                `})},[se(_.$slots,"default",{},void 0,!0)],4)],4)):B("",!0)}});const Me=X(Oe,[["__scopeId","data-v-2f2b0580"]]),je={class:"container-board"},Ce={class:"background"},Ne={style:{position:"absolute"}},Pe=U({__name:"Board",props:{board:{},score:{}},setup(e){const t=e,n=E(()=>t.board.flat());return(r,s)=>{const l=oe("auto-animate");return A(),S("div",je,[j("div",Ce,[(A(),S(D,null,K(16,a=>j("div",{key:a,class:"grid-cell"})),64))]),le((A(),S("div",Ne,[(A(!0),S(D,null,K(n.value,(a,c)=>(A(),ae(Me,{key:a?a[1]:`null-${c}`,value:a?a[0]:0,status:a&&a.length===3?a[2]:"normal",row:(c-c%4)/4,col:c%4},{default:ue(()=>[ce(ie(a?a[0]:0),1)]),_:2},1032,["value","status","row","col"]))),128))])),[[l,{duration:100}]])])}}});const tt=X(Pe,[["__scopeId","data-v-e50db9fa"]]),nt=e=>{var t;(t=document.getElementById(e))==null||t.blur()};function G(e){return de()?(ve(e),!0):!1}function rt(){const e=new Set,t=s=>{e.delete(s)};return{on:s=>{e.add(s);const l=()=>t(s);return G(l),{off:l}},off:t,trigger:s=>Promise.all(Array.from(e).map(l=>l(s)))}}function b(e){return typeof e=="function"?e():fe(e)}const Ve=typeof window<"u"&&typeof document<"u",De=(e,...t)=>{e||console.warn(...t)},ze=Object.prototype.toString,Re=e=>ze.call(e)==="[object Object]",R=()=>{};function Ue(e,t=!1,n="Timeout"){return new Promise((r,s)=>{setTimeout(t?()=>s(n):r,e)})}function We(e){return e}function Xe(e){var t;const n=b(e);return(t=n==null?void 0:n.$el)!=null?t:n}const q=Ve?window:void 0;function P(...e){let t,n,r,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,s]=e,t=q):[t,n,r,s]=e,!t)return R;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const l=[],a=()=>{l.forEach(o=>o()),l.length=0},c=(o,i,m,y)=>(o.addEventListener(i,m,y),()=>o.removeEventListener(i,m,y)),_=z(()=>[Xe(t),b(s)],([o,i])=>{if(a(),!o)return;const m=Re(i)?{...i}:i;l.push(...n.flatMap(y=>r.map($=>c(o,y,$,m))))},{immediate:!0,flush:"post"}),h=()=>{_(),a()};return G(h),h}function Ge(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function st(...e){let t,n,r={};e.length===3?(t=e[0],n=e[1],r=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],r=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:s=q,eventName:l="keydown",passive:a=!1,dedupe:c=!1}=r,_=Ge(t);return P(s,l,o=>{o.repeat&&b(c)||_(o)&&n(o)},a)}function ot(e,t={}){const{threshold:n=50,onSwipe:r,onSwipeEnd:s,onSwipeStart:l,passive:a=!0,window:c=q}=t,_=F({x:0,y:0}),h=F({x:0,y:0}),o=E(()=>_.x-h.x),i=E(()=>_.y-h.y),{max:m,abs:y}=Math,$=E(()=>m(y(o.value),y(i.value))>=n),x=I(!1),L=E(()=>$.value?y(o.value)>y(i.value)?o.value>0?"left":"right":i.value>0?"up":"down":"none"),O=v=>[v.touches[0].clientX,v.touches[0].clientY],C=(v,k)=>{_.x=v,_.y=k},u=(v,k)=>{h.x=v,h.y=k};let f;const w=qe(c==null?void 0:c.document);a?f=w?{passive:!0}:{capture:!1}:f=w?{passive:!1,capture:!0}:{capture:!0};const d=v=>{x.value&&(s==null||s(v,L.value)),x.value=!1},p=[P(e,"touchstart",v=>{if(v.touches.length!==1)return;f.capture&&!f.passive&&v.preventDefault();const[k,M]=O(v);C(k,M),u(k,M),l==null||l(v)},f),P(e,"touchmove",v=>{if(v.touches.length!==1)return;const[k,M]=O(v);u(k,M),!x.value&&$.value&&(x.value=!0),x.value&&(r==null||r(v))},f),P(e,["touchend","touchcancel"],d,f)];return{isPassiveEventSupported:w,isSwiping:x,direction:L,coordsStart:_,coordsEnd:h,lengthX:o,lengthY:i,stop:()=>p.forEach(v=>v())}}function qe(e){if(!e)return!1;let t=!1;const n={get passive(){return t=!0,!1}};return e.addEventListener("x",R,n),e.removeEventListener("x",R),t}function Ye([e,t,n,r]){const s=(o,i)=>1-3*i+3*o,l=(o,i)=>3*i-6*o,a=o=>3*o,c=(o,i,m)=>((s(i,m)*o+l(i,m))*o+a(i))*o,_=(o,i,m)=>3*s(i,m)*o*o+2*l(i,m)*o+a(i),h=o=>{let i=o;for(let m=0;m<4;++m){const y=_(i,e,n);if(y===0)return i;const $=c(i,e,n)-o;i-=$/y}return i};return o=>e===t&&n===r?o:c(h(o),t,r)}function H(e,t,n){return e+n*(t-e)}function V(e){return(typeof e=="number"?[e]:e)||[]}function Ke(e,t,n,r={}){var s,l;const a=b(t),c=b(n),_=V(a),h=V(c),o=(s=b(r.duration))!=null?s:1e3,i=Date.now(),m=Date.now()+o,y=typeof r.transition=="function"?r.transition:(l=b(r.transition))!=null?l:We,$=typeof y=="function"?y:Ye(y);return new Promise(x=>{e.value=a;const L=()=>{var O;if((O=r.abort)!=null&&O.call(r)){x();return}const C=Date.now(),u=$((C-i)/o),f=V(e.value).map((w,d)=>H(_[d],h[d],u));Array.isArray(e.value)?e.value=f.map((w,d)=>{var p,T;return H((p=_[d])!=null?p:0,(T=h[d])!=null?T:0,u)}):typeof e.value=="number"&&(e.value=f[0]),C<m?requestAnimationFrame(L):(e.value=c,x())};L()})}function lt(e,t={}){let n=0;const r=()=>{const l=b(e);return typeof l=="number"?l:l.map(b)},s=I(r());return z(r,async l=>{var a,c;if(b(t.disabled))return;const _=++n;if(t.delay&&await Ue(b(t.delay)),_!==n)return;const h=Array.isArray(l)?l.map(b):b(l);(a=t.onStarted)==null||a.call(t),await Ke(s,s.value,h,{...t,abort:()=>{var o;return _!==n||((o=t.abort)==null?void 0:o.call(t))}}),(c=t.onFinished)==null||c.call(t)},{deep:!0}),z(()=>b(t.disabled),l=>{l&&(n++,s.value=r())}),G(()=>{n++}),E(()=>b(t.disabled)?r():s.value)}function Q(e,t){if(!Array.isArray(e)||!Array.isArray(t))return e===t;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(!Q(e[n],t[n]))return!1;return!0}function Z(e){const t=e.length,n=new Array(t);for(let r=0;r<t;r++)Array.isArray(e[r])?n[r]=Z(e[r]):n[r]=e[r];return n}function J(e,t){const n=()=>{const r=e.length,s=e[0].length;let l=[];for(let a=0;a<s;a++){l[a]=[];for(let c=0;c<r;c++)l[a][c]=e[r-c-1][a]}e=l};for(let r=0;r<t;r++)n();return e}function at(e,t,n){De(e.length===2);const r=()=>{let s=e[1],l=t-e[0]-1;e=[s,l]};for(let s=0;s<n;s++)r();return e}let Fe=0;const He=()=>Fe+=1,Je=2048,Qe=65536,Ze=e=>{switch(e){case"up":return 0;case"down":return 2;case"left":return 1;case"right":return 3}};function ut(){const e=I(0),t=I(0),n=I(4),r=I(4),s=I(Array.from({length:n.value}).map(()=>Array.from({length:r.value}).map(()=>null))),l=I(!1),a=I(!0),c=I(!1),_=I(!1),h=u=>{const f=u.length,w=u[0].length;for(let d=0;d<f;d++)for(let p=0;p<w;p++)if(u[d][p]===null||d<f-1&&u[d][p]&&u[d+1][p]&&u[d][p][0]===u[d+1][p][0]||p<w-1&&u[d][p]&&u[d][p+1]&&u[d][p][0]===u[d][p+1][0])return!1;return!0},o=u=>{const f=Math.random()<.9?2:4,w=Math.floor(Math.random()*n.value),d=Math.floor(Math.random()*r.value);return u[w][d]!==null?o(u):u[w][d]=[f,He()],h(u)&&(c.value=!0),u},i=()=>{e.value=0,c.value=!1,l.value=!1,a.value=!0;let u=Array.from({length:n.value}).map(()=>Array.from({length:r.value}).map(()=>null));u=o(u),u=o(u),s.value=u},m=u=>{let f=Z(s.value);const w=Ze(u);f=J(f,w);const d=f.length,p=f[0].length;for(let T=0;T<p;T++){const v=[];for(let g=0;g<d;g++)f[g][T]!==null&&(v.push(f[g][T]),f[g][T]=null);let k=0;const M=v.length;for(let g=0;g<M;g++){if(g<M-1&&v[g][0]===v[g+1][0]){const N=v[g][0]*2,ee=v[g+1][1];f[k][T]=[N,ee],g++,e.value+=N,t.value=e.value>t.value?e.value:t.value,N===Je&&!l.value&&(l.value=!0),N===Qe&&!_.value&&(_.value=!0)}else f[k][T]=v[g];k++}}f=J(f,4-w),Q(f,s.value)||(f=o(f)),s.value=f},y=()=>m("up"),$=()=>m("down"),x=()=>m("left"),L=()=>m("right"),O=E(()=>{let u=0;const f=s.value.length,w=s.value[0].length;for(let d=0;d<f;d++)for(let p=0;p<w;p++)s.value[d][p]!==null&&(u=s.value[d][p][0]>u?s.value[d][p][0]:u);return u});return{board:s,score:e,highScore:t,isGameOver:c,hasWon:l,firstWon:a,reachedLimit:_,biggestTileNumber:O,initialize:i,test:()=>{s.value=[[[2,1],[4,2],[8,3],[16,4]],[[32,5],[64,6],[128,7],[256,8]],[[512,9],[1024,10],[2048,11],[4096,12]],[[8192,13],[16384,14],[32768,15],[65536,16]]]},move:m,up:y,down:$,left:x,right:L}}export{tt as B,X as _,lt as a,ot as b,nt as c,rt as d,Z as e,at as f,De as g,Ze as h,Q as i,st as o,J as r,ut as u};
