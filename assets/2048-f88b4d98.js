import{d as T,o as m,c as v,i as g,F as B,p as q,j as F,a as k,b as w,g as H,r as J,n as z,s as K,v as E,x as Q,h as X,w as Y,y as Z,t as ee,q as te,k as h}from"./index-a7a70e29.js";const se=""+new URL("bomb-white-2ce930b9.svg",import.meta.url).href,oe=""+new URL("ice-cube-white-1df9e990.svg",import.meta.url).href,re=""+new URL("health-white-364c128f.svg",import.meta.url).href,M=t=>(q("data-v-75fe4e85"),t=t(),F(),t),ne={key:0,class:"arrow-left",style:{top:"3.375rem",left:"0.5rem"}},le={key:1,class:"arrow-right",style:{top:"3.375rem",right:"0.5rem"}},ae={key:2,class:"arrow-up",style:{top:"0.5rem",left:"3.375rem"}},ue={key:3,class:"arrow-down",style:{bottom:"0.5rem",left:"3.375rem"}},ce={key:4,class:"container-prop"},ie=M(()=>k("img",{src:se,class:"bomb",style:{top:"0rem",left:"1rem"}},null,-1)),_e=[ie],fe={key:5,class:"container-prop"},me=M(()=>k("img",{src:oe,class:"ice-cube",style:{top:"0.5rem",left:"0.5rem",transform:"rotate(-2deg)"}},null,-1)),ve=[me],de={key:6,class:"container-prop"},he=M(()=>k("img",{src:re,class:"health",style:{top:"2px",left:"-1px"}},null,-1)),pe=[he],ge=T({__name:"PropOnTile",props:{status:{}},setup(t){const e=t;return(r,o)=>(m(),v(B,null,[e.status==="row"?(m(),v("div",ne)):g("",!0),e.status==="row"?(m(),v("div",le)):g("",!0),e.status==="column"?(m(),v("div",ae)):g("",!0),e.status==="column"?(m(),v("div",ue)):g("",!0),e.status==="bomb"?(m(),v("div",ce,_e)):g("",!0),e.status==="frozen"?(m(),v("div",fe,ve)):g("",!0),e.status==="heal"?(m(),v("div",de,pe)):g("",!0)],64))}});const N=(t,e)=>{const r=t.__vccOpts||t;for(const[o,n]of e)r[o]=n;return r},we=N(ge,[["__scopeId","data-v-75fe4e85"]]),ye=T({__name:"Tile",props:{value:{},status:{},row:{},col:{}},setup(t){const e=t,r=w(()=>`${1+9*e.row}rem`),o=w(()=>`${1+9*e.col}rem`),n=w(()=>e.value?Math.log2(e.value):0),_=w(()=>{if(e.status==="frozen")return"#70f3ff";if(!e.value)return"transparent";const p={2:"#ffb035",4:"#ff8936",8:"#ff7000",16:"#ff4e20",32:"#db5a6b",64:"#cb3a56",128:"#dc3023",256:"#ba0400",512:"#b65f47",1024:"#a24d15",2048:"#8b3400",4096:"#6b1400",8192:"#677e44",16384:"#575e33",32768:"#473e22",65536:"#371e11"};return e.value in p?p[e.value]:"transparent"}),a=w(()=>e.status==="frozen"||e.status==="bomb"||e.status==="heal"?"black":"white"),i=w(()=>e.status==="bomb"||e.status==="heal"?"white":"transparent");return(p,L)=>e.value?(m(),v("div",{key:0,style:z({"background-color":_.value,color:a.value,"box-shadow":`0 0 0.625rem 0rem ${_.value}`,top:r.value,left:o.value,"z-index":n.value}),class:"tile"},[H(we,{status:e.status},null,8,["status"]),k("p",{class:"tile-number",style:z({"text-shadow":`
                    0.0625rem 0.0625rem 0.25rem ${i.value},
                    -0.0625rem 0.0625rem 0.25rem ${i.value},
                    -0.0625rem -0.0625rem 0.25rem ${i.value},
                    0.0625rem -0.0625rem 0.25rem ${i.value}
                `})},[J(p.$slots,"default",{},void 0,!0)],4)],4)):g("",!0)}});const be=N(ye,[["__scopeId","data-v-2f2b0580"]]),ke={class:"container-board"},Ie={class:"background"},$e={style:{position:"absolute"}},xe=T({__name:"Board",props:{board:{},score:{}},setup(t){const e=t,r=w(()=>e.board.flat());return(o,n)=>{const _=K("auto-animate");return m(),v("div",ke,[k("div",Ie,[(m(),v(B,null,E(16,a=>k("div",{key:a,class:"grid-cell"})),64))]),Q((m(),v("div",$e,[(m(!0),v(B,null,E(r.value,(a,i)=>(m(),X(be,{key:a?a[1]:`null-${i}`,value:a?a[0]:0,status:a&&a.length===3?a[2]:"normal",row:(i-i%4)/4,col:i%4},{default:Y(()=>[Z(ee(a?a[0]:0),1)]),_:2},1032,["value","status","row","col"]))),128))])),[[_,{duration:100}]])])}}});const ze=N(xe,[["__scopeId","data-v-e50db9fa"]]),Ee=t=>{var e;(e=document.getElementById(t))==null||e.blur()};function j(t,e){if(!Array.isArray(t)||!Array.isArray(e))return t===e;if(t.length!==e.length)return!1;for(let r=0,o=t.length;r<o;r++)if(!j(t[r],e[r]))return!1;return!0}function R(t){const e=t.length,r=new Array(e);for(let o=0;o<e;o++)Array.isArray(t[o])?r[o]=R(t[o]):r[o]=t[o];return r}function S(t,e){const r=()=>{const o=t.length,n=t[0].length;let _=[];for(let a=0;a<n;a++){_[a]=[];for(let i=0;i<o;i++)_[a][i]=t[o-i-1][a]}t=_};for(let o=0;o<e;o++)r();return t}function Se(t,e,r){te(t.length===2);const o=()=>{let n=t[1],_=e-t[0]-1;t=[n,_]};for(let n=0;n<r;n++)o();return t}let Ae=0;const Be=()=>Ae+=1,Te=2048,Me=65536,Ne=t=>{switch(t){case"up":return 0;case"down":return 2;case"left":return 1;case"right":return 3}};function je(){const t=h(0),e=h(0),r=h(4),o=h(4),n=h(Array.from({length:r.value}).map(()=>Array.from({length:o.value}).map(()=>null))),_=h(!1),a=h(!0),i=h(!1),p=h(!1),L=s=>{const u=s.length,d=s[0].length;for(let l=0;l<u;l++)for(let c=0;c<d;c++)if(s[l][c]===null||l<u-1&&s[l][c]&&s[l+1][c]&&s[l][c][0]===s[l+1][c][0]||c<d-1&&s[l][c]&&s[l][c+1]&&s[l][c][0]===s[l][c+1][0])return!1;return!0},$=s=>{const u=Math.random()<.9?2:4,d=Math.floor(Math.random()*r.value),l=Math.floor(Math.random()*o.value);return s[d][l]!==null?$(s):s[d][l]=[u,Be()],L(s)&&(i.value=!0),s},C=()=>{t.value=0,i.value=!1,_.value=!1,a.value=!0;let s=Array.from({length:r.value}).map(()=>Array.from({length:o.value}).map(()=>null));s=$(s),s=$(s),n.value=s},I=s=>{let u=R(n.value);const d=Ne(s);u=S(u,d);const l=u.length,c=u[0].length;for(let y=0;y<c;y++){const b=[];for(let f=0;f<l;f++)u[f][y]!==null&&(b.push(u[f][y]),u[f][y]=null);let A=0;const O=b.length;for(let f=0;f<O;f++){if(f<O-1&&b[f][0]===b[f+1][0]){const x=b[f][0]*2,W=b[f+1][1];u[A][y]=[x,W],f++,t.value+=x,e.value=t.value>e.value?t.value:e.value,x===Te&&!_.value&&(_.value=!0),x===Me&&!p.value&&(p.value=!0)}else u[A][y]=b[f];A++}}u=S(u,4-d),j(u,n.value)||(u=$(u)),n.value=u},U=()=>I("up"),V=()=>I("down"),D=()=>I("left"),G=()=>I("right"),P=w(()=>{let s=0;const u=n.value.length,d=n.value[0].length;for(let l=0;l<u;l++)for(let c=0;c<d;c++)n.value[l][c]!==null&&(s=n.value[l][c][0]>s?n.value[l][c][0]:s);return s});return{board:n,score:t,highScore:e,isGameOver:i,hasWon:_,firstWon:a,reachedLimit:p,biggestTileNumber:P,initialize:C,test:()=>{n.value=[[[2,1],[4,2],[8,3],[16,4]],[[32,5],[64,6],[128,7],[256,8]],[[512,9],[1024,10],[2048,11],[4096,12]],[[8192,13],[16384,14],[32768,15],[65536,16]]]},move:I,up:U,down:V,left:D,right:G}}export{ze as B,N as _,Se as a,Ee as b,Ne as c,R as d,j as i,S as r,je as u};
