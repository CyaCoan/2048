import{d as D,o as y,c as b,g as I,F as z,p as Y,h as Z,a as B,b as S,e as ee,r as te,n as G,k as ne,l as q,m as re,f as oe,w as se,q as le,t as ae,u as ue,s as ce,v as ie,i as T,j as C}from"./index-64247740.js";const fe=""+new URL("bomb-white-2ce930b9.svg",import.meta.url).href,_e=""+new URL("ice-cube-white-1df9e990.svg",import.meta.url).href,de=""+new URL("health-white-364c128f.svg",import.meta.url).href,P=e=>(Y("data-v-75fe4e85"),e=e(),Z(),e),ve={key:0,class:"arrow-left",style:{top:"3.375rem",left:"0.5rem"}},me={key:1,class:"arrow-right",style:{top:"3.375rem",right:"0.5rem"}},pe={key:2,class:"arrow-up",style:{top:"0.5rem",left:"3.375rem"}},he={key:3,class:"arrow-down",style:{bottom:"0.5rem",left:"3.375rem"}},ye={key:4,class:"container-prop"},we=P(()=>B("img",{src:fe,class:"bomb",style:{top:"0rem",left:"1rem"}},null,-1)),ge=[we],be={key:5,class:"container-prop"},Ae=P(()=>B("img",{src:_e,class:"ice-cube",style:{top:"0.5rem",left:"0.5rem",transform:"rotate(-2deg)"}},null,-1)),ke=[Ae],Te={key:6,class:"container-prop"},Se=P(()=>B("img",{src:de,class:"health",style:{top:"2px",left:"-1px"}},null,-1)),Ie=[Se],$e=D({__name:"PropOnTile",props:{status:{}},setup(e){const t=e;return(n,r)=>(y(),b(z,null,[t.status==="row"?(y(),b("div",ve)):I("",!0),t.status==="row"?(y(),b("div",me)):I("",!0),t.status==="column"?(y(),b("div",pe)):I("",!0),t.status==="column"?(y(),b("div",he)):I("",!0),t.status==="bomb"?(y(),b("div",ye,ge)):I("",!0),t.status==="frozen"?(y(),b("div",be,ke)):I("",!0),t.status==="heal"?(y(),b("div",Te,Ie)):I("",!0)],64))}});const R=(e,t)=>{const n=e.__vccOpts||e;for(const[r,o]of t)n[r]=o;return n},Ee=R($e,[["__scopeId","data-v-75fe4e85"]]),Be=D({__name:"Tile",props:{value:{},status:{},row:{},col:{}},setup(e){const t=e,n=S(()=>`${1+9*t.row}rem`),r=S(()=>`${1+9*t.col}rem`),o=S(()=>t.value?Math.log2(t.value):0),s=S(()=>{if(t.status==="frozen")return"#70f3ff";if(!t.value)return"transparent";const m={2:"#ffb035",4:"#ff8936",8:"#ff7000",16:"#ff4e20",32:"#db5a6b",64:"#cb3a56",128:"#dc3023",256:"#ba0400",512:"#b65f47",1024:"#a24d15",2048:"#8b3400",4096:"#6b1400",8192:"#677e44",16384:"#575e33",32768:"#473e22",65536:"#371e11"};return t.value in m?m[t.value]:"transparent"}),a=S(()=>t.status==="frozen"||t.status==="bomb"||t.status==="heal"?"black":"white"),c=S(()=>t.status==="bomb"||t.status==="heal"?"white":"transparent");return(m,w)=>t.value?(y(),b("div",{key:0,style:G({"background-color":s.value,color:a.value,"box-shadow":`0 0 0.625rem 0rem ${s.value}`,top:n.value,left:r.value,"z-index":o.value}),class:"tile"},[ee(Ee,{status:t.status},null,8,["status"]),B("p",{class:"tile-number",style:G({"text-shadow":`
                    0.0625rem 0.0625rem 0.25rem ${c.value},
                    -0.0625rem 0.0625rem 0.25rem ${c.value},
                    -0.0625rem -0.0625rem 0.25rem ${c.value},
                    0.0625rem -0.0625rem 0.25rem ${c.value}
                `})},[te(m.$slots,"default",{},void 0,!0)],4)],4)):I("",!0)}});const Oe=R(Be,[["__scopeId","data-v-2f2b0580"]]),je={class:"container-board"},xe={class:"background"},Le={style:{position:"absolute"}},Me=D({__name:"Board",props:{board:{},score:{}},setup(e){const t=e,n=S(()=>t.board.flat());return(r,o)=>{const s=ne("auto-animate");return y(),b("div",je,[B("div",xe,[(y(),b(z,null,q(16,a=>B("div",{key:a,class:"grid-cell"})),64))]),re((y(),b("div",Le,[(y(!0),b(z,null,q(n.value,(a,c)=>(y(),oe(Oe,{key:a?a[1]:`null-${c}`,value:a?a[0]:0,status:a&&a.length===3?a[2]:"normal",row:(c-c%4)/4,col:c%4},{default:se(()=>[le(ae(a?a[0]:0),1)]),_:2},1032,["value","status","row","col"]))),128))])),[[s,{duration:100}]])])}}});const Ze=R(Me,[["__scopeId","data-v-e50db9fa"]]),et=e=>{var t;(t=document.getElementById(e))==null||t.blur()};function U(e){return ce()?(ie(e),!0):!1}function tt(){const e=new Set,t=o=>{e.delete(o)};return{on:o=>{e.add(o);const s=()=>t(o);return U(s),{off:s}},off:t,trigger:o=>Promise.all(Array.from(e).map(s=>s(o)))}}function h(e){return typeof e=="function"?e():ue(e)}const Ne=typeof window<"u"&&typeof document<"u",Ve=(e,...t)=>{e||console.warn(...t)},ze=Object.prototype.toString,Ce=e=>ze.call(e)==="[object Object]",De=()=>{};function Pe(e,t=!1,n="Timeout"){return new Promise((r,o)=>{setTimeout(t?()=>o(n):r,e)})}function Re(e){return e}function Ue(e){var t;const n=h(e);return(t=n==null?void 0:n.$el)!=null?t:n}const F=Ne?window:void 0;function We(...e){let t,n,r,o;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,o]=e,t=F):[t,n,r,o]=e,!t)return De;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const s=[],a=()=>{s.forEach(l=>l()),s.length=0},c=(l,f,v,g)=>(l.addEventListener(f,v,g),()=>l.removeEventListener(f,v,g)),m=C(()=>[Ue(t),h(o)],([l,f])=>{if(a(),!l)return;const v=Ce(f)?{...f}:f;s.push(...n.flatMap(g=>r.map($=>c(l,g,$,v))))},{immediate:!0,flush:"post"}),w=()=>{m(),a()};return U(w),w}function Ge(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function nt(...e){let t,n,r={};e.length===3?(t=e[0],n=e[1],r=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],r=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:o=F,eventName:s="keydown",passive:a=!1,dedupe:c=!1}=r,m=Ge(t);return We(o,s,l=>{l.repeat&&h(c)||m(l)&&n(l)},a)}function qe([e,t,n,r]){const o=(l,f)=>1-3*f+3*l,s=(l,f)=>3*f-6*l,a=l=>3*l,c=(l,f,v)=>((o(f,v)*l+s(f,v))*l+a(f))*l,m=(l,f,v)=>3*o(f,v)*l*l+2*s(f,v)*l+a(f),w=l=>{let f=l;for(let v=0;v<4;++v){const g=m(f,e,n);if(g===0)return f;const $=c(f,e,n)-l;f-=$/g}return f};return l=>e===t&&n===r?l:c(w(l),t,r)}function K(e,t,n){return e+n*(t-e)}function V(e){return(typeof e=="number"?[e]:e)||[]}function Ke(e,t,n,r={}){var o,s;const a=h(t),c=h(n),m=V(a),w=V(c),l=(o=h(r.duration))!=null?o:1e3,f=Date.now(),v=Date.now()+l,g=typeof r.transition=="function"?r.transition:(s=h(r.transition))!=null?s:Re,$=typeof g=="function"?g:qe(g);return new Promise(O=>{e.value=a;const j=()=>{var x;if((x=r.abort)!=null&&x.call(r)){O();return}const M=Date.now(),u=$((M-f)/l),_=V(e.value).map((A,i)=>K(m[i],w[i],u));Array.isArray(e.value)?e.value=_.map((A,i)=>{var d,k;return K((d=m[i])!=null?d:0,(k=w[i])!=null?k:0,u)}):typeof e.value=="number"&&(e.value=_[0]),M<v?requestAnimationFrame(j):(e.value=c,O())};j()})}function rt(e,t={}){let n=0;const r=()=>{const s=h(e);return typeof s=="number"?s:s.map(h)},o=T(r());return C(r,async s=>{var a,c;if(h(t.disabled))return;const m=++n;if(t.delay&&await Pe(h(t.delay)),m!==n)return;const w=Array.isArray(s)?s.map(h):h(s);(a=t.onStarted)==null||a.call(t),await Ke(o,o.value,w,{...t,abort:()=>{var l;return m!==n||((l=t.abort)==null?void 0:l.call(t))}}),(c=t.onFinished)==null||c.call(t)},{deep:!0}),C(()=>h(t.disabled),s=>{s&&(n++,o.value=r())}),U(()=>{n++}),S(()=>h(t.disabled)?r():o.value)}function H(e,t){if(!Array.isArray(e)||!Array.isArray(t))return e===t;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(!H(e[n],t[n]))return!1;return!0}function J(e){const t=e.length,n=new Array(t);for(let r=0;r<t;r++)Array.isArray(e[r])?n[r]=J(e[r]):n[r]=e[r];return n}function X(e,t){const n=()=>{const r=e.length,o=e[0].length;let s=[];for(let a=0;a<o;a++){s[a]=[];for(let c=0;c<r;c++)s[a][c]=e[r-c-1][a]}e=s};for(let r=0;r<t;r++)n();return e}function ot(e,t,n){Ve(e.length===2);const r=()=>{let o=e[1],s=t-e[0]-1;e=[o,s]};for(let o=0;o<n;o++)r();return e}let Xe=0;const Fe=()=>Xe+=1,He=2048,Je=65536,Qe=e=>{switch(e){case"up":return 0;case"down":return 2;case"left":return 1;case"right":return 3}};function st(){const e=T(0),t=T(0),n=T(4),r=T(4),o=T(Array.from({length:n.value}).map(()=>Array.from({length:r.value}).map(()=>null))),s=T(!1),a=T(!0),c=T(!1),m=T(!1),w=u=>{const _=u.length,A=u[0].length;for(let i=0;i<_;i++)for(let d=0;d<A;d++)if(u[i][d]===null||i<_-1&&u[i][d]&&u[i+1][d]&&u[i][d][0]===u[i+1][d][0]||d<A-1&&u[i][d]&&u[i][d+1]&&u[i][d][0]===u[i][d+1][0])return!1;return!0},l=u=>{const _=Math.random()<.9?2:4,A=Math.floor(Math.random()*n.value),i=Math.floor(Math.random()*r.value);return u[A][i]!==null?l(u):u[A][i]=[_,Fe()],w(u)&&(c.value=!0),u},f=()=>{e.value=0,c.value=!1,s.value=!1,a.value=!0;let u=Array.from({length:n.value}).map(()=>Array.from({length:r.value}).map(()=>null));u=l(u),u=l(u),o.value=u},v=u=>{let _=J(o.value);const A=Qe(u);_=X(_,A);const i=_.length,d=_[0].length;for(let k=0;k<d;k++){const E=[];for(let p=0;p<i;p++)_[p][k]!==null&&(E.push(_[p][k]),_[p][k]=null);let N=0;const W=E.length;for(let p=0;p<W;p++){if(p<W-1&&E[p][0]===E[p+1][0]){const L=E[p][0]*2,Q=E[p+1][1];_[N][k]=[L,Q],p++,e.value+=L,t.value=e.value>t.value?e.value:t.value,L===He&&!s.value&&(s.value=!0),L===Je&&!m.value&&(m.value=!0)}else _[N][k]=E[p];N++}}_=X(_,4-A),H(_,o.value)||(_=l(_)),o.value=_},g=()=>v("up"),$=()=>v("down"),O=()=>v("left"),j=()=>v("right"),x=S(()=>{let u=0;const _=o.value.length,A=o.value[0].length;for(let i=0;i<_;i++)for(let d=0;d<A;d++)o.value[i][d]!==null&&(u=o.value[i][d][0]>u?o.value[i][d][0]:u);return u});return{board:o,score:e,highScore:t,isGameOver:c,hasWon:s,firstWon:a,reachedLimit:m,biggestTileNumber:x,initialize:f,test:()=>{o.value=[[[2,1],[4,2],[8,3],[16,4]],[[32,5],[64,6],[128,7],[256,8]],[[512,9],[1024,10],[2048,11],[4096,12]],[[8192,13],[16384,14],[32768,15],[65536,16]]]},move:v,up:g,down:$,left:O,right:j}}export{Ze as B,R as _,rt as a,et as b,tt as c,J as d,ot as e,Ve as f,Qe as g,H as i,nt as o,X as r,st as u};
