import{d as C,o,c as v,a as t,n as $,r as A,b as f,e as L,w as M,t as g,u as s,f as _,g as r,T as m,h,i as x,j as y,p as N,k as T}from"./index-62827eef.js";import{_ as W,u as V,a as S,b as z,o as p,B as D,c as E}from"./2048-5546c3bb.js";const F={class:"container-mask"},O=C({__name:"Mask",props:{color:{}},setup(a){const c=a;return(i,e)=>(o(),v("div",F,[t("div",{class:"mask",style:$({"background-color":c.color?c.color:"white"})},null,4),A(i.$slots,"default",{},void 0,!0)]))}});const w=W(O,[["__scopeId","data-v-3e1a2048"]]),l=a=>(N("data-v-5214811a"),a=a(),T(),a),j={class:"container-game"},K={class:"container-header"},R={style:{width:"20%",height:"100px"}},U=l(()=>t("div",{class:"text1"},"成绩",-1)),q={class:"score1"},H=l(()=>t("span",{style:{flex:"1 1 0%"}},null,-1)),J={style:{width:"20%",height:"100px"}},P=l(()=>t("div",{class:"text2"},"最高成绩",-1)),Q={class:"score2"},X={key:0,class:"mask-text",style:{position:"relative"}},Y={key:1,class:"mask-text",style:{position:"relative"}},Z=l(()=>t("br",null,null,-1)),ee=l(()=>t("p",{class:"mask-text",style:{position:"relative"}},"你赢了",-1)),te=l(()=>t("p",{class:"mask-text",style:{position:"relative"}},"你来到了游戏的尽头",-1)),se=C({__name:"ClassicGame",emits:["up","down","left","right"],setup(a,{emit:c}){const i=c,e=V();e.initialize();const B=S(f(()=>e.score.value),{duration:100}),G=S(f(()=>e.highScore.value),{duration:100}),k=L(),{direction:n}=z(k,{threshold:10});M(n,()=>{n.value==="up"&&e.up(),n.value==="down"&&e.down(),n.value==="left"&&e.left(),n.value==="right"&&e.right()});const u=f(()=>!(e.hasWon.value&&e.firstWon.value||e.isGameOver.value||e.reachedLimit.value));return p(["ArrowUp","w"],()=>{u.value&&(e.up(),i("up"))}),p(["ArrowDown","s"],()=>{u.value&&(e.down(),i("down"))}),p(["ArrowLeft","a"],()=>{u.value&&(e.left(),i("left"))}),p(["ArrowRight","d"],()=>{u.value&&(e.right(),i("right"))}),document.addEventListener("touchmove",function(b){b.preventDefault()},{passive:!1}),(b,d)=>(o(),v("div",j,[t("div",K,[t("div",R,[U,t("div",q,g(s(B).toFixed(0)),1)]),H,t("div",J,[P,t("div",Q,g(s(G).toFixed(0)),1)]),t("button",{primary:"",onClick:d[0]||(d[0]=I=>{s(e).initialize(),s(E)("new_game")}),class:"button new-game",id:"new_game"},"重玩一局")]),_(m,null,{default:r(()=>[s(e).isGameOver.value?(o(),h(w,{key:0,color:"white",style:{position:"absolute",bottom:"0rem"}},{default:r(()=>[s(e).firstWon.value?(o(),v("p",X,"你输了")):(o(),v("p",Y,[x("你输了"),Z,x("但你曾经赢过")]))]),_:1})):y("",!0)]),_:1}),_(m,null,{default:r(()=>[s(e).hasWon.value&&s(e).firstWon.value?(o(),h(w,{key:0,color:"gold",style:{position:"absolute",bottom:"0rem"}},{default:r(()=>[ee,t("button",{primary:"",onClick:d[1]||(d[1]=I=>{s(e).hasWon.value=!1,s(e).firstWon.value=!1}),class:"button",style:{position:"relative"}},"继续")]),_:1})):y("",!0)]),_:1}),_(m,null,{default:r(()=>[s(e).reachedLimit.value?(o(),h(w,{key:0,color:"white",style:{position:"absolute",bottom:"0rem"}},{default:r(()=>[te]),_:1})):y("",!0)]),_:1}),_(D,{board:s(e).board.value,score:s(e).score.value,class:"container-board",style:{bottom:"0rem"},ref_key:"board",ref:k},null,8,["board","score"])]))}});const ie=W(se,[["__scopeId","data-v-5214811a"]]);export{ie as default};
