import{d as L,o as y,c as b,g as I,F as C,p as Y,h as Z,a as B,b as S,e as ee,r as te,n as q,k as ne,l as K,m as re,f as se,w as oe,q as le,t as ae,u as ue,s as ce,v as ie,i as T,j as D}from"./index-ae6d9dec.js";const fe="/2048/assets/bomb-white-2ce930b9.svg",_e="/2048/assets/ice-cube-white-1df9e990.svg",de="/2048/assets/health-white-364c128f.svg",P=e=>(Y("data-v-75fe4e85"),e=e(),Z(),e),ve={key:0,class:"arrow-left",style:{top:"3.375rem",left:"0.5rem"}},me={key:1,class:"arrow-right",style:{top:"3.375rem",right:"0.5rem"}},pe={key:2,class:"arrow-up",style:{top:"0.5rem",left:"3.375rem"}},he={key:3,class:"arrow-down",style:{bottom:"0.5rem",left:"3.375rem"}},ye={key:4,class:"container-prop"},we=P(()=>B("img",{src:fe,class:"bomb",style:{top:"0rem",left:"1rem"}},null,-1)),ge=[we],be={key:5,class:"container-prop"},Ae=P(()=>B("img",{src:_e,class:"ice-cube",style:{top:"0.5rem",left:"0.5rem",transform:"rotate(-2deg)"}},null,-1)),ke=[Ae],Te={key:6,class:"container-prop"},Se=P(()=>B("img",{src:de,class:"health",style:{top:"2px",left:"-1px"}},null,-1)),Ie=[Se],$e=L({__name:"PropOnTile",props:{status:{}},setup(e){const t=e;return(n,r)=>(y(),b(C,null,[t.status==="row"?(y(),b("div",ve)):I("",!0),t.status==="row"?(y(),b("div",me)):I("",!0),t.status==="column"?(y(),b("div",pe)):I("",!0),t.status==="column"?(y(),b("div",he)):I("",!0),t.status==="bomb"?(y(),b("div",ye,ge)):I("",!0),t.status==="frozen"?(y(),b("div",be,ke)):I("",!0),t.status==="heal"?(y(),b("div",Te,Ie)):I("",!0)],64))}});const W=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},Ee=W($e,[["__scopeId","data-v-75fe4e85"]]),Be=L({__name:"Tile",props:{value:{},status:{},row:{},col:{}},setup(e){const t=e,n=S(()=>`${1+9*t.row}rem`),r=S(()=>`${1+9*t.col}rem`),s=S(()=>t.value?Math.log2(t.value):0),o=S(()=>{if(t.status==="frozen")return"#70f3ff";if(!t.value)return"transparent";const m={2:"#ffb035",4:"#ff8936",8:"#ff7000",16:"#ff4e20",32:"#db5a6b",64:"#cb3a56",128:"#dc3023",256:"#ba0400",512:"#b65f47",1024:"#a24d15",2048:"#8b3400",4096:"#6b1400",8192:"#677e44",16384:"#575e33",32768:"#473e22",65536:"#371e11"};return t.value in m?m[t.value]:"transparent"}),a=S(()=>t.status==="frozen"||t.status==="bomb"||t.status==="heal"?"black":"white"),c=S(()=>t.status==="bomb"||t.status==="heal"?"white":"transparent");return(m,w)=>t.value?(y(),b("div",{key:0,style:q({"background-color":o.value,color:a.value,"box-shadow":`0 0 0.625rem 0rem ${o.value}`,top:n.value,left:r.value,"z-index":s.value}),class:"tile"},[ee(Ee,{status:t.status},null,8,["status"]),B("p",{class:"tile-number",style:q({"text-shadow":`
                    0.0625rem 0.0625rem 0.25rem ${c.value},
                    -0.0625rem 0.0625rem 0.25rem ${c.value},
                    -0.0625rem -0.0625rem 0.25rem ${c.value},
                    0.0625rem -0.0625rem 0.25rem ${c.value}
                `})},[te(m.$slots,"default",{},void 0,!0)],4)],4)):I("",!0)}});const Oe=W(Be,[["__scopeId","data-v-2f2b0580"]]),je={class:"container-board"},xe={class:"background"},Me={style:{position:"absolute"}},Ne=L({__name:"Board",props:{board:{},score:{}},setup(e){const t=e,n=S(()=>t.board.flat());return(r,s)=>{const o=ne("auto-animate");return y(),b("div",je,[B("div",xe,[(y(),b(C,null,K(16,a=>B("div",{key:a,class:"grid-cell"})),64))]),re((y(),b("div",Me,[(y(!0),b(C,null,K(n.value,(a,c)=>(y(),se(Oe,{key:a?a[1]:`null-${c}`,value:a?a[0]:0,status:a&&a.length===3?a[2]:"normal",row:(c-c%4)/4,col:c%4},{default:oe(()=>[le(ae(a?a[0]:0),1)]),_:2},1032,["value","status","row","col"]))),128))])),[[o,{duration:100}]])])}}});const Ze=W(Ne,[["__scopeId","data-v-e50db9fa"]]),et=e=>{var t;(t=document.getElementById(e))==null||t.blur()};function G(e){return ce()?(ie(e),!0):!1}function tt(){const e=new Set,t=s=>{e.delete(s)};return{on:s=>{e.add(s);const o=()=>t(s);return G(o),{off:o}},off:t,trigger:s=>Promise.all(Array.from(e).map(o=>o(s)))}}function h(e){return typeof e=="function"?e():ue(e)}const Ve=typeof window<"u"&&typeof document<"u",ze=(e,...t)=>{e||console.warn(...t)},Ce=Object.prototype.toString,De=e=>Ce.call(e)==="[object Object]",Le=()=>{};function Pe(e,t=!1,n="Timeout"){return new Promise((r,s)=>{setTimeout(t?()=>s(n):r,e)})}function We(e){return e}function Ge(e){var t;const n=h(e);return(t=n==null?void 0:n.$el)!=null?t:n}const F=Ve?window:void 0;function Re(...e){let t,n,r,s;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,s]=e,t=F):[t,n,r,s]=e,!t)return Le;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const o=[],a=()=>{o.forEach(l=>l()),o.length=0},c=(l,f,v,g)=>(l.addEventListener(f,v,g),()=>l.removeEventListener(f,v,g)),m=D(()=>[Ge(t),h(s)],([l,f])=>{if(a(),!l)return;const v=De(f)?{...f}:f;o.push(...n.flatMap(g=>r.map($=>c(l,g,$,v))))},{immediate:!0,flush:"post"}),w=()=>{m(),a()};return G(w),w}function qe(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function nt(...e){let t,n,r={};e.length===3?(t=e[0],n=e[1],r=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],r=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:s=F,eventName:o="keydown",passive:a=!1,dedupe:c=!1}=r,m=qe(t);return Re(s,o,l=>{l.repeat&&h(c)||m(l)&&n(l)},a)}function Ke([e,t,n,r]){const s=(l,f)=>1-3*f+3*l,o=(l,f)=>3*f-6*l,a=l=>3*l,c=(l,f,v)=>((s(f,v)*l+o(f,v))*l+a(f))*l,m=(l,f,v)=>3*s(f,v)*l*l+2*o(f,v)*l+a(f),w=l=>{let f=l;for(let v=0;v<4;++v){const g=m(f,e,n);if(g===0)return f;const $=c(f,e,n)-l;f-=$/g}return f};return l=>e===t&&n===r?l:c(w(l),t,r)}function U(e,t,n){return e+n*(t-e)}function z(e){return(typeof e=="number"?[e]:e)||[]}function Ue(e,t,n,r={}){var s,o;const a=h(t),c=h(n),m=z(a),w=z(c),l=(s=h(r.duration))!=null?s:1e3,f=Date.now(),v=Date.now()+l,g=typeof r.transition=="function"?r.transition:(o=h(r.transition))!=null?o:We,$=typeof g=="function"?g:Ke(g);return new Promise(O=>{e.value=a;const j=()=>{var x;if((x=r.abort)!=null&&x.call(r)){O();return}const N=Date.now(),u=$((N-f)/l),_=z(e.value).map((A,i)=>U(m[i],w[i],u));Array.isArray(e.value)?e.value=_.map((A,i)=>{var d,k;return U((d=m[i])!=null?d:0,(k=w[i])!=null?k:0,u)}):typeof e.value=="number"&&(e.value=_[0]),N<v?requestAnimationFrame(j):(e.value=c,O())};j()})}function rt(e,t={}){let n=0;const r=()=>{const o=h(e);return typeof o=="number"?o:o.map(h)},s=T(r());return D(r,async o=>{var a,c;if(h(t.disabled))return;const m=++n;if(t.delay&&await Pe(h(t.delay)),m!==n)return;const w=Array.isArray(o)?o.map(h):h(o);(a=t.onStarted)==null||a.call(t),await Ue(s,s.value,w,{...t,abort:()=>{var l;return m!==n||((l=t.abort)==null?void 0:l.call(t))}}),(c=t.onFinished)==null||c.call(t)},{deep:!0}),D(()=>h(t.disabled),o=>{o&&(n++,s.value=r())}),G(()=>{n++}),S(()=>h(t.disabled)?r():s.value)}function H(e,t){if(!Array.isArray(e)||!Array.isArray(t))return e===t;if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(!H(e[n],t[n]))return!1;return!0}function J(e){const t=e.length,n=new Array(t);for(let r=0;r<t;r++)Array.isArray(e[r])?n[r]=J(e[r]):n[r]=e[r];return n}function X(e,t){const n=()=>{const r=e.length,s=e[0].length;let o=[];for(let a=0;a<s;a++){o[a]=[];for(let c=0;c<r;c++)o[a][c]=e[r-c-1][a]}e=o};for(let r=0;r<t;r++)n();return e}function st(e,t,n){ze(e.length===2);const r=()=>{let s=e[1],o=t-e[0]-1;e=[s,o]};for(let s=0;s<n;s++)r();return e}let Xe=0;const Fe=()=>Xe+=1,He=2048,Je=65536,Qe=e=>{switch(e){case"up":return 0;case"down":return 2;case"left":return 1;case"right":return 3}};function ot(){const e=T(0),t=T(0),n=T(4),r=T(4),s=T(Array.from({length:n.value}).map(()=>Array.from({length:r.value}).map(()=>null))),o=T(!1),a=T(!0),c=T(!1),m=T(!1),w=u=>{const _=u.length,A=u[0].length;for(let i=0;i<_;i++)for(let d=0;d<A;d++)if(u[i][d]===null||i<_-1&&u[i][d]&&u[i+1][d]&&u[i][d][0]===u[i+1][d][0]||d<A-1&&u[i][d]&&u[i][d+1]&&u[i][d][0]===u[i][d+1][0])return!1;return!0},l=u=>{const _=Math.random()<.9?2:4,A=Math.floor(Math.random()*n.value),i=Math.floor(Math.random()*r.value);return u[A][i]!==null?l(u):u[A][i]=[_,Fe()],w(u)&&(c.value=!0),u},f=()=>{e.value=0,c.value=!1,o.value=!1,a.value=!0;let u=Array.from({length:n.value}).map(()=>Array.from({length:r.value}).map(()=>null));u=l(u),u=l(u),s.value=u},v=u=>{let _=J(s.value);const A=Qe(u);_=X(_,A);const i=_.length,d=_[0].length;for(let k=0;k<d;k++){const E=[];for(let p=0;p<i;p++)_[p][k]!==null&&(E.push(_[p][k]),_[p][k]=null);let V=0;const R=E.length;for(let p=0;p<R;p++){if(p<R-1&&E[p][0]===E[p+1][0]){const M=E[p][0]*2,Q=E[p+1][1];_[V][k]=[M,Q],p++,e.value+=M,t.value=e.value>t.value?e.value:t.value,M===He&&!o.value&&(o.value=!0),M===Je&&!m.value&&(m.value=!0)}else _[V][k]=E[p];V++}}_=X(_,4-A),H(_,s.value)||(_=l(_)),s.value=_},g=()=>v("up"),$=()=>v("down"),O=()=>v("left"),j=()=>v("right"),x=S(()=>{let u=0;const _=s.value.length,A=s.value[0].length;for(let i=0;i<_;i++)for(let d=0;d<A;d++)s.value[i][d]!==null&&(u=s.value[i][d][0]>u?s.value[i][d][0]:u);return u});return{board:s,score:e,highScore:t,isGameOver:c,hasWon:o,firstWon:a,reachedLimit:m,biggestTileNumber:x,initialize:f,test:()=>{s.value=[[[2,1],[4,2],[8,3],[16,4]],[[32,5],[64,6],[128,7],[256,8]],[[512,9],[1024,10],[2048,11],[4096,12]],[[8192,13],[16384,14],[32768,15],[65536,16]]]},move:v,up:g,down:$,left:O,right:j}}export{Ze as B,W as _,rt as a,et as b,tt as c,J as d,st as e,ze as f,Qe as g,H as i,nt as o,X as r,ot as u};
