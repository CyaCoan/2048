import{d as B,o as i,c as m,a as t,n as L,r as $,b as f,e as A,w as E,t as x,u as s,f as v,g as n,T as h,h as y,i as S,j as w,p as M,k as N}from"./index-6f25e3fc.js";import{_ as W,u as T,a as C,b as V,o as p,B as D,s as F}from"./resize-d1ff34f0.js";const O={class:"container-mask"},R=B({__name:"Mask",props:{color:{}},setup(o){const a=o;return(d,l)=>(i(),m("div",O,[t("div",{class:"mask",style:L({"background-color":a.color?a.color:"white"})},null,4),$(d.$slots,"default",{},void 0,!0)]))}});const b=W(R,[["__scopeId","data-v-3e1a2048"]]),j=o=>{var a;(a=document.getElementById(o))==null||a.blur()},r=o=>(M("data-v-2ca4dc65"),o=o(),N(),o),K={class:"container-game"},U={class:"container-header"},q={style:{width:"20%",height:"100px"}},H=r(()=>t("div",{class:"text1"},"成绩",-1)),J={class:"score1"},P=r(()=>t("span",{style:{flex:"1 1 0%"}},null,-1)),Q={style:{width:"20%",height:"100px"}},X=r(()=>t("div",{class:"text2"},"最高成绩",-1)),Y={class:"score2"},Z={key:0,class:"mask-text",style:{position:"relative"}},ee={key:1,class:"mask-text",style:{position:"relative"}},te=r(()=>t("br",null,null,-1)),se=r(()=>t("div",{class:"mask-text",style:{position:"relative"}},"你赢了",-1)),oe=r(()=>t("div",{class:"mask-text",style:{position:"relative"}},"你来到了游戏的尽头",-1)),ae=B({__name:"ClassicGame",emits:["up","down","left","right"],setup(o,{emit:a}){const d=()=>F(656,804);d(),window.addEventListener("resize",d);const l=a,e=T();e.initialize();const I=C(f(()=>e.score.value),{duration:100}),z=C(f(()=>e.highScore.value),{duration:100}),k=A(),{direction:c}=V(k,{threshold:10});E(c,()=>{c.value==="up"&&e.up(),c.value==="down"&&e.down(),c.value==="left"&&e.left(),c.value==="right"&&e.right()});const u=f(()=>!(e.hasWon.value&&e.firstWon.value||e.isGameOver.value||e.reachedLimit.value));return p(["ArrowUp","w"],()=>{u.value&&(e.up(),l("up"))}),p(["ArrowDown","s"],()=>{u.value&&(e.down(),l("down"))}),p(["ArrowLeft","a"],()=>{u.value&&(e.left(),l("left"))}),p(["ArrowRight","d"],()=>{u.value&&(e.right(),l("right"))}),document.addEventListener("touchmove",function(g){g.preventDefault()},{passive:!1}),(g,_)=>(i(),m("div",K,[t("div",U,[t("div",q,[H,t("div",J,x(s(I).toFixed(0)),1)]),P,t("div",Q,[X,t("div",Y,x(s(z).toFixed(0)),1)]),t("button",{primary:"",onClick:_[0]||(_[0]=G=>{s(e).initialize(),s(j)("new_game")}),class:"button new-game",id:"new_game"},"重玩一局")]),v(h,null,{default:n(()=>[s(e).isGameOver.value?(i(),y(b,{key:0,color:"white",style:{position:"absolute",bottom:"0rem"}},{default:n(()=>[s(e).firstWon.value?(i(),m("div",Z,"你输了")):(i(),m("div",ee,[S("你输了"),te,S("但你曾经赢过")]))]),_:1})):w("",!0)]),_:1}),v(h,null,{default:n(()=>[s(e).hasWon.value&&s(e).firstWon.value?(i(),y(b,{key:0,color:"gold",style:{position:"absolute",bottom:"0rem"}},{default:n(()=>[se,t("button",{primary:"",onClick:_[1]||(_[1]=G=>{s(e).hasWon.value=!1,s(e).firstWon.value=!1}),class:"button",style:{position:"relative"}},"继续")]),_:1})):w("",!0)]),_:1}),v(h,null,{default:n(()=>[s(e).reachedLimit.value?(i(),y(b,{key:0,color:"white",style:{position:"absolute",bottom:"0rem"}},{default:n(()=>[oe]),_:1})):w("",!0)]),_:1}),v(D,{board:s(e).board.value,class:"container-board",style:{bottom:"0rem"},ref_key:"board",ref:k},null,8,["board"])]))}});const re=W(ae,[["__scopeId","data-v-2ca4dc65"]]);export{re as default};
