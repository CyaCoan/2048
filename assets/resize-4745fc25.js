import{d as W,o as S,c as A,j as B,F as R,p as te,k as ne,a as j,b as E,f as oe,r as re,n as Y,l as se,m as F,q as le,h as ae,g as ue,i as ce,t as ie,u as fe,s as de,v as ve,x as H,e as $,w as V}from"./index-7ec7a42b.js";const _e=""+new URL("bomb-white-2ce930b9.svg",import.meta.url).href,pe=""+new URL("ice-cube-white-1df9e990.svg",import.meta.url).href,me=""+new URL("health-white-364c128f.svg",import.meta.url).href,U=e=>(te("data-v-75fe4e85"),e=e(),ne(),e),he={key:0,class:"arrow-left",style:{top:"3.375rem",left:"0.5rem"}},ye={key:1,class:"arrow-right",style:{top:"3.375rem",right:"0.5rem"}},we={key:2,class:"arrow-up",style:{top:"0.5rem",left:"3.375rem"}},ge={key:3,class:"arrow-down",style:{bottom:"0.5rem",left:"3.375rem"}},be={key:4,class:"container-prop"},Se=U(()=>j("img",{src:_e,class:"bomb",style:{top:"0rem",left:"1rem"}},null,-1)),Ae=[Se],Ee={key:5,class:"container-prop"},xe=U(()=>j("img",{src:pe,class:"ice-cube",style:{top:"0.5rem",left:"0.5rem",transform:"rotate(-2deg)"}},null,-1)),ke=[xe],Te={key:6,class:"container-prop"},$e=U(()=>j("img",{src:me,class:"health",style:{top:"2px",left:"-1px"}},null,-1)),Ie=[$e],Be=W({__name:"PropOnTile",props:{status:{}},setup(e){const t=e;return(n,o)=>(S(),A(R,null,[t.status==="row"?(S(),A("div",he)):B("",!0),t.status==="row"?(S(),A("div",ye)):B("",!0),t.status==="column"?(S(),A("div",we)):B("",!0),t.status==="column"?(S(),A("div",ge)):B("",!0),t.status==="bomb"?(S(),A("div",be,Ae)):B("",!0),t.status==="frozen"?(S(),A("div",Ee,ke)):B("",!0),t.status==="heal"?(S(),A("div",Te,Ie)):B("",!0)],64))}});const X=(e,t)=>{const n=e.__vccOpts||e;for(const[o,r]of t)n[o]=r;return n},Le=X(Be,[["__scopeId","data-v-75fe4e85"]]),Oe=W({__name:"Tile",props:{value:{},status:{},row:{},col:{}},setup(e){const t=e,n=E(()=>`${1+9*t.row}rem`),o=E(()=>`${1+9*t.col}rem`),r=E(()=>t.value?Math.log2(t.value):0),s=E(()=>{if(t.status==="frozen")return"#70f3ff";if(!t.value)return"transparent";const _={2:"#ffb035",4:"#ff8936",8:"#ff7000",16:"#ff4e20",32:"#db5a6b",64:"#cb3a56",128:"#dc3023",256:"#ba0400",512:"#b65f47",1024:"#a24d15",2048:"#8b3400",4096:"#6b1400",8192:"#677e44",16384:"#575e33",32768:"#473e22",65536:"#371e11"};return t.value in _?_[t.value]:"transparent"}),a=E(()=>t.status==="frozen"||t.status==="bomb"||t.status==="heal"?"black":"white"),c=E(()=>t.status==="bomb"||t.status==="heal"?"white":"transparent");return(_,h)=>t.value?(S(),A("div",{key:0,style:Y({"background-color":s.value,color:a.value,"box-shadow":`0 0 0.625rem 0rem ${s.value}`,top:n.value,left:o.value,"z-index":r.value}),class:"tile"},[oe(Le,{status:t.status},null,8,["status"]),j("p",{class:"tile-number",style:Y({"text-shadow":`
                    0.0625rem 0.0625rem 0.25rem ${c.value},
                    -0.0625rem 0.0625rem 0.25rem ${c.value},
                    -0.0625rem -0.0625rem 0.25rem ${c.value},
                    0.0625rem -0.0625rem 0.25rem ${c.value}
                `})},[re(_.$slots,"default",{},void 0,!0)],4)],4)):B("",!0)}});const Me=X(Oe,[["__scopeId","data-v-2f2b0580"]]),je={class:"container-board"},Ce={class:"background"},Ne={style:{position:"absolute"}},ze=W({__name:"Board",props:{board:{}},setup(e){const t=e,n=E(()=>t.board.flat());return(o,r)=>{const s=se("auto-animate");return S(),A("div",je,[j("div",Ce,[(S(),A(R,null,F(16,a=>j("div",{key:a,class:"grid-cell"})),64))]),le((S(),A("div",Ne,[(S(!0),A(R,null,F(n.value,(a,c)=>(S(),ae(Me,{key:a?a[1]:`null-${c}`,value:a?a[0]:0,status:a&&a.length===3?a[2]:"normal",row:(c-c%4)/4,col:c%4},{default:ue(()=>[ce(ie(a?a[0]:0),1)]),_:2},1032,["value","status","row","col"]))),128))])),[[s,{duration:100}]])])}}});const tt=X(ze,[["__scopeId","data-v-a1fc455c"]]);function G(e){return de()?(ve(e),!0):!1}function nt(){const e=new Set,t=r=>{e.delete(r)};return{on:r=>{e.add(r);const s=()=>t(r);return G(s),{off:s}},off:t,trigger:r=>Promise.all(Array.from(e).map(s=>s(r)))}}function b(e){return typeof e=="function"?e():fe(e)}const Pe=typeof window<"u"&&typeof document<"u",Re=(e,...t)=>{e||console.warn(...t)},Ve=Object.prototype.toString,De=e=>Ve.call(e)==="[object Object]",D=()=>{};function We(e,t=!1,n="Timeout"){return new Promise((o,r)=>{setTimeout(t?()=>r(n):o,e)})}function Ue(e){return e}function Xe(e){var t;const n=b(e);return(t=n==null?void 0:n.$el)!=null?t:n}const q=Pe?window:void 0;function z(...e){let t,n,o,r;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,o,r]=e,t=q):[t,n,o,r]=e,!t)return D;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const s=[],a=()=>{s.forEach(l=>l()),s.length=0},c=(l,i,m,y)=>(l.addEventListener(i,m,y),()=>l.removeEventListener(i,m,y)),_=V(()=>[Xe(t),b(r)],([l,i])=>{if(a(),!l)return;const m=De(i)?{...i}:i;s.push(...n.flatMap(y=>o.map(I=>c(l,y,I,m))))},{immediate:!0,flush:"post"}),h=()=>{_(),a()};return G(h),h}function Ge(e){return typeof e=="function"?e:typeof e=="string"?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function ot(...e){let t,n,o={};e.length===3?(t=e[0],n=e[1],o=e[2]):e.length===2?typeof e[1]=="object"?(t=!0,n=e[0],o=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);const{target:r=q,eventName:s="keydown",passive:a=!1,dedupe:c=!1}=o,_=Ge(t);return z(r,s,l=>{l.repeat&&b(c)||_(l)&&n(l)},a)}function rt(e,t={}){const{threshold:n=50,onSwipe:o,onSwipeEnd:r,onSwipeStart:s,passive:a=!0,window:c=q}=t,_=H({x:0,y:0}),h=H({x:0,y:0}),l=E(()=>_.x-h.x),i=E(()=>_.y-h.y),{max:m,abs:y}=Math,I=E(()=>m(y(l.value),y(i.value))>=n),k=$(!1),L=E(()=>I.value?y(l.value)>y(i.value)?l.value>0?"left":"right":i.value>0?"up":"down":"none"),O=v=>[v.touches[0].clientX,v.touches[0].clientY],C=(v,x)=>{_.x=v,_.y=x},u=(v,x)=>{h.x=v,h.y=x};let f;const w=qe(c==null?void 0:c.document);a?f=w?{passive:!0}:{capture:!1}:f=w?{passive:!1,capture:!0}:{capture:!0};const d=v=>{k.value&&(r==null||r(v,L.value)),k.value=!1},p=[z(e,"touchstart",v=>{if(v.touches.length!==1)return;f.capture&&!f.passive&&v.preventDefault();const[x,M]=O(v);C(x,M),u(x,M),s==null||s(v)},f),z(e,"touchmove",v=>{if(v.touches.length!==1)return;const[x,M]=O(v);u(x,M),!k.value&&I.value&&(k.value=!0),k.value&&(o==null||o(v))},f),z(e,["touchend","touchcancel"],d,f)];return{isPassiveEventSupported:w,isSwiping:k,direction:L,coordsStart:_,coordsEnd:h,lengthX:l,lengthY:i,stop:()=>p.forEach(v=>v())}}function qe(e){if(!e)return!1;let t=!1;const n={get passive(){return t=!0,!1}};return e.addEventListener("x",D,n),e.removeEventListener("x",D),t}function Ye([e,t,n,o]){const r=(l,i)=>1-3*i+3*l,s=(l,i)=>3*i-6*l,a=l=>3*l,c=(l,i,m)=>((r(i,m)*l+s(i,m))*l+a(i))*l,_=(l,i,m)=>3*r(i,m)*l*l+2*s(i,m)*l+a(i),h=l=>{let i=l;for(let m=0;m<4;++m){const y=_(i,e,n);if(y===0)return i;const I=c(i,e,n)-l;i-=I/y}return i};return l=>e===t&&n===o?l:c(h(l),t,o)}function K(e,t,n){return e+n*(t-e)}function P(e){return(typeof e=="number"?[e]:e)||[]}function Fe(e,t,n,o={}){var r,s;const a=b(t),c=b(n),_=P(a),h=P(c),l=(r=b(o.duration))!=null?r:1e3,i=Date.now(),m=Date.now()+l,y=typeof o.transition=="function"?o.transition:(s=b(o.transition))!=null?s:Ue,I=typeof y=="function"?y:Ye(y);return new Promise(k=>{e.value=a;const L=()=>{var O;if((O=o.abort)!=null&&O.call(o)){k();return}const C=Date.now(),u=I((C-i)/l),f=P(e.value).map((w,d)=>K(_[d],h[d],u));Array.isArray(e.value)?e.value=f.map((w,d)=>{var p,T;return K((p=_[d])!=null?p:0,(T=h[d])!=null?T:0,u)}):typeof e.value=="number"&&(e.value=f[0]),C<m?requestAnimationFrame(L):(e.value=c,k())};L()})}function st(e,t={}){let n=0;const o=()=>{const s=b(e);return typeof s=="number"?s:s.map(b)},r=$(o());return V(o,async s=>{var a,c;if(b(t.disabled))return;const _=++n;if(t.delay&&await We(b(t.delay)),_!==n)return;const h=Array.isArray(s)?s.map(b):b(s);(a=t.onStarted)==null||a.call(t),await Fe(r,r.value,h,{...t,abort:()=>{var l;return _!==n||((l=t.abort)==null?void 0:l.call(t))}}),(c=t.onFinished)==null||c.call(t)},{deep:!0}),V(()=>b(t.disabled),s=>{s&&(n++,r.value=o())}),G(()=>{n++}),E(()=>b(t.disabled)?o():r.value)}function Q(e,t){if(!Array.isArray(e)||!Array.isArray(t))return e===t;if(e.length!==t.length)return!1;for(let n=0,o=e.length;n<o;n++)if(!Q(e[n],t[n]))return!1;return!0}function Z(e){const t=e.length,n=new Array(t);for(let o=0;o<t;o++)Array.isArray(e[o])?n[o]=Z(e[o]):n[o]=e[o];return n}function J(e,t){const n=()=>{const o=e.length,r=e[0].length;let s=[];for(let a=0;a<r;a++){s[a]=[];for(let c=0;c<o;c++)s[a][c]=e[o-c-1][a]}e=s};for(let o=0;o<t;o++)n();return e}function lt(e,t,n){Re(e.length===2);const o=()=>{let r=e[1],s=t-e[0]-1;e=[r,s]};for(let r=0;r<n;r++)o();return e}let He=0;const Ke=()=>He+=1,Je=2048,Qe=65536,Ze=e=>{switch(e){case"up":return 0;case"down":return 2;case"left":return 1;case"right":return 3}};function at(){const e=$(0),t=$(0),n=$(4),o=$(4),r=$(Array.from({length:n.value}).map(()=>Array.from({length:o.value}).map(()=>null))),s=$(!1),a=$(!0),c=$(!1),_=$(!1),h=u=>{const f=u.length,w=u[0].length;for(let d=0;d<f;d++)for(let p=0;p<w;p++)if(u[d][p]===null||d<f-1&&u[d][p]&&u[d+1][p]&&u[d][p][0]===u[d+1][p][0]||p<w-1&&u[d][p]&&u[d][p+1]&&u[d][p][0]===u[d][p+1][0])return!1;return!0},l=u=>{const f=Math.random()<.9?2:4,w=Math.floor(Math.random()*n.value),d=Math.floor(Math.random()*o.value);return u[w][d]!==null?l(u):u[w][d]=[f,Ke()],h(u)&&(c.value=!0),u},i=()=>{e.value=0,c.value=!1,s.value=!1,a.value=!0;let u=Array.from({length:n.value}).map(()=>Array.from({length:o.value}).map(()=>null));u=l(u),u=l(u),r.value=u},m=u=>{let f=Z(r.value);const w=Ze(u);f=J(f,w);const d=f.length,p=f[0].length;for(let T=0;T<p;T++){const v=[];for(let g=0;g<d;g++)f[g][T]!==null&&(v.push(f[g][T]),f[g][T]=null);let x=0;const M=v.length;for(let g=0;g<M;g++){if(g<M-1&&v[g][0]===v[g+1][0]){const N=v[g][0]*2,ee=v[g+1][1];f[x][T]=[N,ee],g++,e.value+=N,t.value=e.value>t.value?e.value:t.value,N===Je&&!s.value&&(s.value=!0),N===Qe&&!_.value&&(_.value=!0)}else f[x][T]=v[g];x++}}f=J(f,4-w),Q(f,r.value)||(f=l(f)),r.value=f},y=()=>m("up"),I=()=>m("down"),k=()=>m("left"),L=()=>m("right"),O=E(()=>{let u=0;const f=r.value.length,w=r.value[0].length;for(let d=0;d<f;d++)for(let p=0;p<w;p++)r.value[d][p]!==null&&(u=r.value[d][p][0]>u?r.value[d][p][0]:u);return u});return{board:r,score:e,highScore:t,isGameOver:c,hasWon:s,firstWon:a,reachedLimit:_,biggestTileNumber:O,initialize:i,test:()=>{r.value=[[[2,1],[4,2],[8,3],[16,4]],[[32,5],[64,6],[128,7],[256,8]],[[512,9],[1024,10],[2048,11],[4096,12]],[[8192,13],[16384,14],[32768,15],[65536,16]]]},move:m,up:y,down:I,left:k,right:L}}function ut(e,t){const n=document.documentElement.clientWidth,o=document.documentElement.clientHeight,r=n/e>1?1:n/e,s=o/t>1?1:o/t,a=r<s?r*16:s*16;document.documentElement.style.fontSize=`${a.toFixed(3)}px`}export{tt as B,X as _,st as a,rt as b,nt as c,Z as d,lt as e,Re as f,Ze as g,Q as i,ot as o,J as r,ut as s,at as u};
