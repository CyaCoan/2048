import{d as S,o,c as v,a as s,n as I,r as $,b as f,e as A,w as L,t as k,u as t,f as _,g as l,T as m,h,i as w,p as M,j as z}from"./index-143c6707.js";import{_ as C,u as D,a as x,b as N,o as p,B as T,c as V}from"./2048-54fcbb3b.js";const E={class:"container-mask"},F=S({__name:"Mask",props:{color:{}},setup(a){const c=a;return(i,e)=>(o(),v("div",E,[s("div",{class:"mask",style:I({"background-color":c.color?c.color:"white"})},null,4),$(i.$slots,"default",{},void 0,!0)]))}});const y=C(F,[["__scopeId","data-v-cf6a9b58"]]),r=a=>(M("data-v-51c4993a"),a=a(),z(),a),O={class:"container-game"},j={class:"container-header"},K={style:{width:"20%",height:"100px"}},R=r(()=>s("div",{class:"text1"},"成绩",-1)),U={class:"score1"},q=r(()=>s("span",{style:{flex:"1 1 0%"}},null,-1)),H={style:{width:"20%",height:"100px"}},J=r(()=>s("div",{class:"text2"},"最高成绩",-1)),P={class:"score2"},Q={key:0,class:"mask-text",style:{position:"relative",top:"11.25rem"}},X={key:1,class:"mask-text",style:{position:"relative",top:"11.25rem"}},Y=r(()=>s("p",{class:"mask-text",style:{position:"relative",top:"8.75rem"}},"你赢了",-1)),Z=r(()=>s("p",{class:"mask-text",style:{position:"relative",top:"11.25rem"}},"你来到了游戏的尽头",-1)),ee=S({__name:"ClassicGame",emits:["up","down","left","right"],setup(a,{emit:c}){const i=c,e=D();e.initialize();const W=x(f(()=>e.score.value),{duration:100}),B=x(f(()=>e.highScore.value),{duration:100}),g=A(),{direction:n}=N(g,{threshold:10});L(n,()=>{n.value==="up"&&(console.log("swipe up"),e.up()),n.value==="down"&&(console.log("swipe down"),e.down()),n.value==="left"&&(console.log("swipe left"),e.left()),n.value==="right"&&(console.log("swipe right"),e.right())});const u=f(()=>!(e.hasWon.value&&e.firstWon.value||e.isGameOver.value||e.reachedLimit.value));return p(["ArrowUp","w"],()=>{u.value&&(e.up(),i("up"))}),p(["ArrowDown","s"],()=>{u.value&&(e.down(),i("down"))}),p(["ArrowLeft","a"],()=>{u.value&&(e.left(),i("left"))}),p(["ArrowRight","d"],()=>{u.value&&(e.right(),i("right"))}),document.addEventListener("touchmove",function(b){b.preventDefault()},{passive:!1}),(b,d)=>(o(),v("div",O,[s("div",j,[s("div",K,[R,s("div",U,k(t(W).toFixed(0)),1)]),q,s("div",H,[J,s("div",P,k(t(B).toFixed(0)),1)]),s("button",{primary:"",onClick:d[0]||(d[0]=G=>{t(e).initialize(),t(V)("new_game")}),class:"button new-game",id:"new_game"},"重玩一局")]),_(m,null,{default:l(()=>[t(e).isGameOver.value?(o(),h(y,{key:0,color:"white",style:{position:"absolute",bottom:"0rem"}},{default:l(()=>[t(e).firstWon.value?(o(),v("p",Q,"你输了")):(o(),v("p",X,"你输了，但你曾经赢过"))]),_:1})):w("",!0)]),_:1}),_(m,null,{default:l(()=>[t(e).hasWon.value&&t(e).firstWon.value?(o(),h(y,{key:0,color:"gold",style:{position:"absolute",bottom:"0rem"}},{default:l(()=>[Y,s("button",{primary:"",onClick:d[1]||(d[1]=G=>{t(e).hasWon.value=!1,t(e).firstWon.value=!1}),class:"button continue"},"继续")]),_:1})):w("",!0)]),_:1}),_(m,null,{default:l(()=>[t(e).reachedLimit.value?(o(),h(y,{key:0,color:"white",style:{position:"absolute",bottom:"0rem"}},{default:l(()=>[Z]),_:1})):w("",!0)]),_:1}),_(T,{board:t(e).board.value,score:t(e).score.value,class:"container-board",style:{bottom:"0rem"},ref_key:"board",ref:g},null,8,["board","score"])]))}});const oe=C(ee,[["__scopeId","data-v-51c4993a"]]);export{oe as default};
